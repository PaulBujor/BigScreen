@page "/movies"
@using BigScreen.Frontend.Core.Enums
@using BigScreen.Frontend.Core.Helpers

<PageTitle>Movies</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Movies</MudText>
@if (ViewModel.PageResults is not null)
{
    <GeneralPageLayout TFilter="SortFilter" PaginationCount="ViewModel.PageResults.TotalPages" FilterOptions="new[] { SortFilter.Popularity, SortFilter.Rating }" SearchContextChanged="ViewModel.OnSearchContextChanged">
        <div class="d-flex flex-wrap justify-space-between gap-5">
            @if (ViewModel.PageResults.Results is not null && ViewModel.PageResults.Results.Any())
            {
                @foreach (var result in ViewModel.PageResults.Results)
                {
                    <Card @key="result" Id="result.Id" Image="@result.ImageUrl" RoutableTo="RoutableTo.Movie" Header="@result.Name" Caption="@DateOnlyHelper.GetTextForCardCaption(result.ReleaseDate)"/>
                }
            }
        </div>
    </GeneralPageLayout>
}